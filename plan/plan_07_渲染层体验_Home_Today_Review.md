# 计划：渲染层体验 - Home/Today/Review

## 计划概述

### 计划目标

实现核心学习流程的前端体验，包括首页概览、今日待复习列表、复习流程与评分交互。

### 在项目中的位置

渲染层的核心用户路径，直接承载 SM-2 复习体验与进度反馈。

---

## 依赖关系

### 前置条件

- **前置任务**：plan_06 - Electron 主进程与应用壳；plan_04 - Fastify API 与数据访问层；plan_03 - SM-2 调度核心；plan_05 - AI 辅助功能与提示工程
- **前置数据**：复习列表与调度结果
- **前置环境**：UI 组件库与状态管理配置可用

### 后续影响

- **后续任务**：plan_08 - Library 与内容管理；plan_09 - 设置与偏好
- **产出数据**：页面骨架、状态管理、交互流程

---

## 子任务分解

**每一个子任务都必须小而具体**

- sub_plan_01 - 页面与路由结构
  - 简述：定义 Home、Today、Review 路由与布局
- sub_plan_02 - 数据获取与缓存
  - 简述：通过查询库获取待复习数据，缓存与失效策略
- sub_plan_03 - 复习流程与评分交互
  - 简述：构建题面展示、评分动作、结果反馈与下一题切换
- sub_plan_04 - 进度与统计呈现
  - 简述：展示今日进度、队列剩余、历史趋势占位
- sub_plan_05 - 动效与可用性
  - 简述：添加关键动效、快捷键与无障碍提示
- sub_plan_06 - 错误与空态处理
  - 简述：定义空列表、加载失败、网络不可用时的提示与重试

---

## 技术方案

### 架构设计

基于组件化页面 + 状态管理 + 查询库的三层模式：路由层 -> 页面容器 -> 组件与交互逻辑；复习流程以状态机或步骤控制实现。

### 核心技术选型

- **技术1**：React + 路由与查询库
- **技术2**：状态管理（轻量全局 store）与动效库

### 数据模型

消费共享的词条与调度状态；前端维护会话态（当前卡片、队列、评分状态）。

### 接口设计

调用 API/IPC 获取待复习列表、提交评分、刷新统计；前端暴露页面级事件给快捷键和动效。

---

## 执行摘要

### 输入

- 待复习数据、统计数据
- 用户评分与交互事件

### 处理

- 拉取数据并缓存
- 驱动复习状态机与评分提交
- 更新进度展示与反馈

### 输出

- 可交互的 Home/Today/Review 体验
- 提交后的更新列表与统计

---

## 验收标准

**验收标准必须清晰明确**

### 功能验收

- 首页展示今日待复习量与入口
- Today 列表可加载、分页/过滤正常
- Review 流程可评分、更新队列并显示反馈

### 质量验收

- 交互流畅，动效不阻塞主线程
- 空态、错误态、加载态均有提示
- 状态管理与查询缓存无重复请求或泄露

---

## 交付物清单

### 代码文件

- 页面与组件实现：覆盖 Home/Today/Review
- 状态与查询逻辑模块

### 配置文件

- 路由与查询配置

### 文档

- 页面交互说明与状态流转描述

### 测试文件

- 组件与流程测试：覆盖加载、评分、错误、空态
