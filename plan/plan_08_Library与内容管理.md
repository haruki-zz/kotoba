# 计划：Library 与内容管理

## 计划概述

### 计划目标

提供词库管理能力，包括列表浏览、搜索过滤、标签管理、批量导入导出与编辑操作。

### 在项目中的位置

承载内容管理与整理，服务于复习队列的输入与维护。

---

## 依赖关系

### 前置条件

- **前置任务**：plan_04 - Fastify API 与数据访问层；plan_02 - 数据库与数据模型设计；plan_07 - 渲染层体验
- **前置数据**：词条与标签数据
- **前置环境**：渲染层基础路由与状态管理可用

### 后续影响

- **后续任务**：plan_09 - 设置与偏好；plan_10 - 测试质量与发布流程
- **产出数据**：Library 页面、操作流程、导入导出策略

---

## 子任务分解

**每一个子任务都必须小而具体**

- sub_plan_01 - 列表与过滤
  - 简述：实现分页/过滤/排序，支持标签与难度筛选
- sub_plan_02 - 详情与编辑
  - 简述：提供查看、编辑、删除、软删除与恢复流程
- sub_plan_03 - 标签管理
  - 简述：创建、编辑、删除标签并与词条关联
- sub_plan_04 - 批量导入导出
  - 简述：规划文件格式、字段映射与校验反馈
- sub_plan_05 - 批量操作与选中态
  - 简述：支持批量标记、批量删除、批量标签关联
- sub_plan_06 - 状态与反馈
  - 简述：加载、空态、错误提示与操作结果反馈

---

## 技术方案

### 架构设计

页面容器负责数据获取与过滤参数；列表组件负责展示；侧栏或对话框负责编辑与标签管理；导入导出通过文件处理模块封装。

### 核心技术选型

- **技术1**：React 组件化 + 查询库
- **技术2**：表格/列表组件与文件处理工具

### 数据模型

复用共享模式中的词条与标签结构；导入导出采用规范化字段映射与校验结果结构。

### 接口设计

调用 API 获取列表、详情、标签；提供导入导出端点；编辑与批量操作通过批处理接口。

---

## 执行摘要

### 输入

- 词条数据、标签数据
- 用户的过滤条件与编辑操作

### 处理

- 查询并展示列表
- 处理编辑、标签关联、批量操作
- 导入文件解析与校验反馈

### 输出

- 可用的 Library 管理体验
- 更新后的词条与标签状态

---

## 验收标准

**验收标准必须清晰明确**

### 功能验收

- 列表可按标签、难度、时间过滤与排序
- 编辑与删除操作生效并反馈
- 导入文件能校验并给出错误报告，导出符合格式

### 质量验收

- 操作具备撤销/确认或防误触设计
- 批量操作在大数据量下保持响应
- 状态与缓存更新一致，无重复请求

---

## 交付物清单

### 代码文件

- Library 页面与组件
- 导入导出与标签管理逻辑模块

### 配置文件

- 导入导出格式定义与校验规则占位

### 文档

- 操作流程与字段映射说明

### 测试文件

- 列表、编辑、标签、导入导出流程测试
