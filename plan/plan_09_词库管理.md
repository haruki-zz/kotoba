# 计划：词库管理

## 计划概述

### 计划目标
实现词库列表、搜索、详情、编辑/重生成与删除（含确认）的完整管理能力。

### 在项目中的位置
提供对全部词条的浏览与维护，是学习与复习之外的核心管理入口。

---

## 依赖关系

### 前置条件
- 前置任务：plan_03 - 主进程 API 与基础服务；plan_05 - AI 生成与 Provider 抽象；plan_06 - 渲染端基础框架与设计体系
- 前置数据：共享 schema、生成与删除规则
- 前置环境：列表与搜索接口可用

### 后续影响
- 后续任务：plan_10 - 统计与反馈（依赖词条数据）、plan_11 - 设置与偏好（影响展示项）
- 产出数据：词条更新记录、删除日志

---

## 子任务分解
**每一个子任务都必须小而具体**

- sub_plan_01 - 列表与搜索
  - 简述：实现可分页或滚动的列表，支持按词、假名等搜索
- sub_plan_02 - 详情查看
  - 简述：悬浮详情页展示全部字段与时间信息
- sub_plan_03 - 编辑与重生成
  - 简述：在详情内提供手动编辑与重生成入口，保存后回写
- sub_plan_04 - 删除与确认
  - 简述：删除需二次确认，成功后更新列表
- sub_plan_05 - 过滤与排序
  - 简述：按掌握度、时间或复习状态筛选与排序
- sub_plan_06 - 状态反馈与无障碍
  - 简述：加载、空态、错误提示与键盘操作

---

## 技术方案

### 架构设计
列表容器管理查询与分页，详情作为悬浮层；编辑表单复用今日学习的表单组件与校验；操作统一调用词条 API。

### 核心技术选型
- React + Zustand：列表状态与过滤条件管理
- 表单校验复用：React Hook Form + Zod
- Framer Motion：列表与详情动效

### 数据模型
使用 words 表全部字段，增加本地状态的过滤条件与排序配置。

### 接口设计
提供列表查询、搜索、详情、更新、重生成、删除接口；返回更新后的词条或确认状态。

---

## 执行摘要

### 输入
- 词条数据与搜索参数
- 用户的编辑、重生成与删除操作

### 处理
- 查询并展示列表
- 展开详情，编辑或重生成后保存
- 删除需确认并刷新列表

### 输出
- 更新后的词条数据
- 删除结果与列表刷新

---

## 验收标准
**验收标准必须清晰明确**

### 功能验收
- 列表可搜索、过滤、排序，支持悬浮详情查看
- 编辑与重生成可保存并即时反映到列表
- 删除需确认，成功后列表同步更新
- 空态与错误提示明确

### 质量验收
- 列表性能可接受，无明显卡顿
- 表单校验一致，避免数据不一致

---

## 交付物清单

### 代码文件
- 词库列表、详情与编辑组件约定：1 套

### 配置文件
- 列表查询与过滤配置说明：1 份

### 文档
- 词库操作流程说明：1 份

### 测试文件
- 词库交互测试计划：1 份
