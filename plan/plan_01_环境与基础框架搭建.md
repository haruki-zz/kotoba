# 计划：环境与基础框架搭建

## 计划概述

### 计划目标
建立可运行的单包根目录（禁用 workspace/monorepo），完成基础依赖安装、工程化脚手架、格式校验与命令配置。

### 在项目中的位置
作为所有模块的地基，提供统一的包管理、脚本与开发体验，为主进程、渲染层、API 层提供运行环境。

---

## 依赖关系

### 前置条件
- **前置任务**：plan_00 - 总体实施计划
- **前置数据**：技术栈选型确定
- **前置环境**：Node.js 与 pnpm 可用，Git 仓库可访问

### 后续影响
- **后续任务**：plan_02 - 数据库与数据模型设计；plan_03 - SM-2 调度核心；plan_04 - Fastify API 与数据访问层；plan_05 - AI 辅助功能与提示工程；plan_06 - Electron 主进程与应用壳；plan_07 - 渲染层体验
- **产出数据**：单包根目录结构、通用脚本、基础配置

---

## 子任务分解
**每一个子任务都必须小而具体**

- sub_plan_01 - 初始化单包根目录
  - 简述：配置单一 package 根目录结构（禁止 monorepo/workspace，node_modules 仅存于根目录）
- sub_plan_02 - 设置通用脚本与别名
  - 简述：定义开发、构建、测试、格式化命令
- sub_plan_03 - 建立代码规范
  - 简述：配置 ESLint、Prettier、TypeScript 基础规则
- sub_plan_04 - 环境变量与示例
  - 简述：提供本地环境变量模板与加载策略
- sub_plan_05 - CI/CD 雏形
  - 简述：准备最小化流水线步骤（安装、测试、构建占位）

---

## 技术方案

### 架构设计
采用单包结构（禁用 pnpm 工作区）；统一根级配置覆盖主进程、渲染层、共享模块，保持 lint/format/test 一致性，且所有依赖仅安装在根级 node_modules。

### 核心技术选型
- **技术1**：单包结构（无 workspace）
- **技术2**：ESLint + Prettier + TypeScript 基线

### 数据模型
无业务数据；仅工程配置与脚本。

### 接口设计
无业务接口；定义工作流命令接口（dev/build/test/lint/format）。

---

## 执行摘要

### 输入
- 技术栈文档
- 团队工具链需求

### 处理
- 创建根级目录与子目录（不建立 workspace）
- 配置脚本与规范
- 设置环境变量模板与基础 CI

### 输出
- 可运行的开发脚本
- 统一的 lint/format 设置
- 环境变量示例文件

---

## 验收标准
**验收标准必须清晰明确**

### 功能验收
- 根目录包含预期的主进程、渲染、共享、数据、脚本子目录（非 workspace）
- 根级脚本可执行开发、测试、构建、格式化命令
- 环境变量示例文件存在并被忽略提交

### 质量验收
- Lint 与格式化命令运行通过
- TypeScript 基础配置无错误

---

## 交付物清单

### 代码文件
- 工程配置文件：覆盖根与各子目录所需配置（单一 package）

### 配置文件
- 环境变量示例与忽略规则

### 文档
- 简要使用说明置于计划或根级说明

### 测试文件
- 无（仅需脚本可运行性验证）
