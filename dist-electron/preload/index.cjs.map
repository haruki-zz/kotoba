{"version":3,"file":"index.cjs","sources":["../../src/shared/ipc.ts","../../src/preload/index.ts"],"sourcesContent":["import { ProviderSettings, ProviderState, WordCardContent } from \"./ai\";\nimport { ActivitySummary, ReviewRating, Word, WordDraft, WordUpdate } from \"./types\";\nimport { ExportRequest, ExportResult, ImportRequest, ImportResult } from \"./data-transfer\";\n\nexport const IPC_CHANNELS = {\n  generateWordCard: \"ai:generate-word-card\",\n  setProvider: \"ai:set-provider\",\n  getProvider: \"ai:get-provider\",\n  loadWords: \"words:load\",\n  addWord: \"words:add\",\n  updateWord: \"words:update\",\n  deleteWord: \"words:delete\",\n  loadReviewQueue: \"review:queue\",\n  submitReview: \"review:submit\",\n  loadActivitySummary: \"activity:summary\",\n  exportData: \"data:export\",\n  importData: \"data:import\",\n} as const;\n\nexport type IpcChannel = (typeof IPC_CHANNELS)[keyof typeof IPC_CHANNELS];\n\nexport interface IpcRequestMap {\n  [IPC_CHANNELS.generateWordCard]: { payload: { term: string }; response: WordCardContent };\n  [IPC_CHANNELS.setProvider]: { payload: ProviderSettings; response: ProviderState };\n  [IPC_CHANNELS.getProvider]: { payload: void; response: ProviderState };\n  [IPC_CHANNELS.loadWords]: { payload: void; response: Word[] };\n  [IPC_CHANNELS.addWord]: { payload: WordDraft; response: Word };\n  [IPC_CHANNELS.updateWord]: { payload: { id: string; update: WordUpdate }; response: Word };\n  [IPC_CHANNELS.deleteWord]: { payload: { id: string }; response: void };\n  [IPC_CHANNELS.loadReviewQueue]: { payload: void; response: Word[] };\n  [IPC_CHANNELS.submitReview]: { payload: { id: string; grade: ReviewRating }; response: Word };\n  [IPC_CHANNELS.loadActivitySummary]: { payload: void; response: ActivitySummary };\n  [IPC_CHANNELS.exportData]: { payload: ExportRequest; response: ExportResult };\n  [IPC_CHANNELS.importData]: { payload: ImportRequest; response: ImportResult };\n}\n\ntype AsyncResult<K extends IpcChannel> = Promise<IpcRequestMap[K][\"response\"]>;\n\ntype HandlerFor<K extends IpcChannel> = IpcRequestMap[K][\"payload\"] extends void\n  ? () => AsyncResult<K>\n  : (payload: IpcRequestMap[K][\"payload\"]) => AsyncResult<K>;\n\nexport interface RendererApi {\n  generateWordCard: HandlerFor<typeof IPC_CHANNELS.generateWordCard>;\n  setProvider: HandlerFor<typeof IPC_CHANNELS.setProvider>;\n  getProvider: HandlerFor<typeof IPC_CHANNELS.getProvider>;\n  loadWords: HandlerFor<typeof IPC_CHANNELS.loadWords>;\n  addWord: HandlerFor<typeof IPC_CHANNELS.addWord>;\n  updateWord: HandlerFor<typeof IPC_CHANNELS.updateWord>;\n  deleteWord: HandlerFor<typeof IPC_CHANNELS.deleteWord>;\n  loadReviewQueue: HandlerFor<typeof IPC_CHANNELS.loadReviewQueue>;\n  submitReview: HandlerFor<typeof IPC_CHANNELS.submitReview>;\n  loadActivitySummary: HandlerFor<typeof IPC_CHANNELS.loadActivitySummary>;\n  exportData: HandlerFor<typeof IPC_CHANNELS.exportData>;\n  importData: HandlerFor<typeof IPC_CHANNELS.importData>;\n}\n","import { contextBridge, ipcRenderer } from \"electron\";\nimport { IPC_CHANNELS, IpcChannel, IpcRequestMap, RendererApi } from \"../shared/ipc\";\n\nconst invoke = <K extends IpcChannel>(\n  channel: K,\n  payload: IpcRequestMap[K][\"payload\"],\n): Promise<IpcRequestMap[K][\"response\"]> => ipcRenderer.invoke(channel, payload);\n\nconst api: RendererApi = {\n  generateWordCard: (payload) => invoke(IPC_CHANNELS.generateWordCard, payload),\n  setProvider: (payload) => invoke(IPC_CHANNELS.setProvider, payload),\n  getProvider: () => invoke(IPC_CHANNELS.getProvider, undefined),\n  loadWords: () => invoke(IPC_CHANNELS.loadWords, undefined),\n  addWord: (payload) => invoke(IPC_CHANNELS.addWord, payload),\n  updateWord: (payload) => invoke(IPC_CHANNELS.updateWord, payload),\n  deleteWord: (payload) => invoke(IPC_CHANNELS.deleteWord, payload),\n  loadReviewQueue: () => invoke(IPC_CHANNELS.loadReviewQueue, undefined),\n  submitReview: (payload) => invoke(IPC_CHANNELS.submitReview, payload),\n  loadActivitySummary: () => invoke(IPC_CHANNELS.loadActivitySummary, undefined),\n  exportData: (payload) => invoke(IPC_CHANNELS.exportData, payload),\n  importData: (payload) => invoke(IPC_CHANNELS.importData, payload),\n};\n\ncontextBridge.exposeInMainWorld(\"electronAPI\", api);\n"],"names":["ipcRenderer","contextBridge"],"mappings":";;AAIO,MAAM,eAAe;AAAA,EAC1B,kBAAkB;AAAA,EAClB,aAAa;AAAA,EACb,aAAa;AAAA,EACb,WAAW;AAAA,EACX,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,iBAAiB;AAAA,EACjB,cAAc;AAAA,EACd,qBAAqB;AAAA,EACrB,YAAY;AAAA,EACZ,YAAY;AACd;ACdA,MAAM,SAAS,CACb,SACA,YAC0CA,SAAAA,YAAY,OAAO,SAAS,OAAO;AAE/E,MAAM,MAAmB;AAAA,EACvB,kBAAkB,CAAC,YAAY,OAAO,aAAa,kBAAkB,OAAO;AAAA,EAC5E,aAAa,CAAC,YAAY,OAAO,aAAa,aAAa,OAAO;AAAA,EAClE,aAAa,MAAM,OAAO,aAAa,aAAa,MAAS;AAAA,EAC7D,WAAW,MAAM,OAAO,aAAa,WAAW,MAAS;AAAA,EACzD,SAAS,CAAC,YAAY,OAAO,aAAa,SAAS,OAAO;AAAA,EAC1D,YAAY,CAAC,YAAY,OAAO,aAAa,YAAY,OAAO;AAAA,EAChE,YAAY,CAAC,YAAY,OAAO,aAAa,YAAY,OAAO;AAAA,EAChE,iBAAiB,MAAM,OAAO,aAAa,iBAAiB,MAAS;AAAA,EACrE,cAAc,CAAC,YAAY,OAAO,aAAa,cAAc,OAAO;AAAA,EACpE,qBAAqB,MAAM,OAAO,aAAa,qBAAqB,MAAS;AAAA,EAC7E,YAAY,CAAC,YAAY,OAAO,aAAa,YAAY,OAAO;AAAA,EAChE,YAAY,CAAC,YAAY,OAAO,aAAa,YAAY,OAAO;AAClE;AAEAC,SAAAA,cAAc,kBAAkB,eAAe,GAAG;"}